<div class="container-fluid px-4 py-4">
  <div class="card border-0 shadow-sm">
    <div class="card-header bg-white border-bottom">
      <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
        <h5 class="mb-0 fw-bold">Daftar Inventori</h5>
        <div class="d-flex gap-2">
          <!-- Search -->
          <div class="input-group input-group-sm" style="width: 250px">
            <span class="input-group-text bg-white">
              <i class="bi bi-search"></i>
            </span>
            <input type="text" class="form-control" placeholder="Cari barang..." />
          </div>
          <!-- Button Tambah -->
          <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#tambahBarangModal"><i class="bi bi-plus-circle me-1"></i>Tambah Barang</button>
        </div>
      </div>
    </div>
    <div class="card-body p-0">
      <!-- Filter Section -->
      <div class="p-3 border-bottom bg-light">
        <div class="row g-2">
          <div class="col-md-3">
            <select class="form-select form-select-sm">
              <option selected>Semua Kategori</option>
              <option value="1">Elektronik</option>
              <option value="2">Furniture</option>
              <option value="3">Alat Tulis</option>
              <option value="4">Makanan & Minuman</option>
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-select form-select-sm">
              <option selected>Status Stok</option>
              <option value="1">Stok Aman</option>
              <option value="2">Stok Menipis</option>
              <option value="3">Stok Habis</option>
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-select form-select-sm">
              <option selected>Urutkan</option>
              <option value="1">Nama A-Z</option>
              <option value="2">Nama Z-A</option>
              <option value="3">Stok Terbanyak</option>
              <option value="4">Stok Tersedikit</option>
            </select>
          </div>
          <div class="col-md-3">
            <button class="btn btn-sm btn-outline-secondary w-100"><i class="bi bi-arrow-clockwise me-1"></i>Reset Filter</button>
          </div>
        </div>
      </div>

      <!-- Table -->
      <div class="table-responsive">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th class="px-4">No</th>
              <th>Kode Barang</th>
              <th>Nama Barang</th>
              <th>Kategori</th>
              <th>Stok</th>
              <th>Satuan</th>
              <th>Harga</th>
              <th>Status</th>
              <th class="text-center">Aksi</th>
            </tr>
          </thead>
          <tbody>
            <% if (dataInventori.length === 0) { %>
            <tr>
              <td colspan="9" class="text-center py-4 text-muted">Tidak ada data barang.</td>
            </tr>
            <% } else { %> <% dataInventori.forEach((barang, index) => { %>
            <tr>
              <td class="px-4"><%= index + 1 %></td>
              <td><span class="badge bg-secondary">BRG<%= barang.id.toString().padStart(3, '0') %></span></td>
              <td><%= barang.nama %></td>
              <td>
                <span class="badge bg-info text-dark"> <%= barang.kategori ? barang.kategori.nama : "Tidak ada kategori" %> </span>
              </td>
              <td><strong><%= barang.stok %></strong></td>
              <td><%= barang.satuan %></td>
              <td>Rp <%= barang.harga.toLocaleString("id-ID") %></td>
              <td>
                <% if (barang.stok === 0) { %>
                <span class="badge bg-danger">Stok Habis</span>
                <% } else if (barang.stok <= 5) { %>
                <span class="badge bg-warning text-dark">Stok Menipis</span>
                <% } else { %>
                <span class="badge bg-success">Stok Aman</span>
                <% } %>
              </td>
              <td class="text-center">
                <div class="btn-group btn-group-sm" role="group">
                  <button type="button" class="btn btn-outline-primary" title="Detail">
                    <i class="bi bi-eye"></i>
                  </button>
                  <button type="button" class="btn btn-outline-warning" title="Edit">
                    <i class="bi bi-pencil"></i>
                  </button>
                  <button type="button" class="btn btn-outline-danger" title="Hapus">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
            <% }) %> <% } %>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Pagination -->
    <div class="card-footer bg-white border-top">
      <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
        <div class="text-muted small">Menampilkan <strong>1-6</strong> dari <strong>25</strong> data</div>
        <nav>
          <ul class="pagination pagination-sm mb-0">
            <li class="page-item disabled">
              <a class="page-link" href="#" tabindex="-1">
                <i class="bi bi-chevron-left"></i>
              </a>
            </li>
            <li class="page-item active"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">4</a></li>
            <li class="page-item">
              <a class="page-link" href="#">
                <i class="bi bi-chevron-right"></i>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>

<!-- Modal Tambah Barang -->
<div class="modal fade" id="tambahBarangModal" tabindex="-1" aria-labelledby="tambahBarangLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="tambahBarangLabel">Tambah Barang</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <form id="formTambahBarang">
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="namaBarang" class="form-label">Nama Barang</label>
              <input type="text" class="form-control" id="namaBarang" name="nama" placeholder="Masukkan nama barang" required />
            </div>

            <div class="col-md-6">
              <label for="kategoriBarang" class="form-label">Kategori</label>
              <select class="form-select" name="kategori" id="kategoriBarang" required>
                <option value="" disabled selected>Pilih kategori</option>
                <% kategoriList.forEach(kategori => { %>
                <option value="<%= kategori.id %>"><%= kategori.nama %></option>
                <% }) %>
              </select>
            </div>

            <div class="col-md-6">
              <label for="stokBarang" class="form-label">Stok</label>
              <input type="number" class="form-control" id="stokBarang" name="stok" placeholder="Masukkan jumlah stok" required />
            </div>

            <!-- Input satuan (select) -->
            <div class="col-md-6">
              <label for="satuanBarang" class="form-label">Satuan</label>
              <select class="form-select" id="satuanBarang" name="satuan" required>
                <option value="" disabled selected>Pilih satuan</option>
                <option value="pcs">pcs</option>
                <option value="box">box</option>
                <option value="liter">liter</option>
                <option value="kg">kg</option>
                <option value="meter">meter</option>
              </select>
            </div>

            <div class="col-md-6">
              <label for="hargaBarang" class="form-label">Harga (Rp)</label>
              <input type="number" class="form-control" id="hargaBarang" name="harga" placeholder="Masukkan harga barang" required />
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button type="submit" class="btn btn-primary">Simpan</button>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- End Modal Tambah Barang -->

<script src="/js/pages/inventory.js"></script>
